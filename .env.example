# Updockly Configuration Example

# --- Core Settings ---
# Database connection string (PostgreSQL or SQLite)
DATABASE_URL=postgres://updockly:updockly@postgres:5432/updocklydb

# JWT signing key. 
# If empty, a random key is generated on startup by Updockly and will be provided directly in the UI.
# Persist this in .env to survive restarts if generated.
JWT_SECRET=

# Vault encryption key for sensitive data (2FA secrets). 
# If empty, a random key is generated on startup by Updockly and will be provided directly in the UI.
# Persist this in .env to survive restarts if generated.
VAULT_KEY=

# Public URL of the Updockly frontend (used for CORS and redirects)
CLIENT_ORIGIN=http://localhost:5174

# Server listen address
SERVER_ADDR=:5000

# Docker Compose DNS name for the backend service (used by the frontend Nginx proxy)
BACKEND_HOST=updockly-backend

# Default timezone for scheduling (e.g. Europe/Paris)
TIMEZONE=UTC

# Automatically clean unused Docker images after updates
AUTO_PRUNE_IMAGES=false

# Hide the "Support the project" button in the sidebar
HIDE_SUPPORT_BUTTON=false

# Require agents to always connect from the same IP address
AGENT_REQUIRE_IP_BINDING=false

# IPs added to the server's SSL certificate Subject Alternative Names (SAN)
# Only used when TLS is enabled for an Updockly agent
SERVER_SAN_IPS=127.0.0.1,0.0.0.0

# Domains added to the server's SSL certificate Subject Alternative Names (SAN)
# Only used when TLS is enabled for an Updockly agent
SERVER_SAN_DOMAINS=localhost,backend,updockly-backend

# --- SSO Settings ---
# Enable Single Sign-On
SSO_ENABLED=false
# Provider Identifier (e.g., authentik, keycloak)
SSO_PROVIDER=authentik
# OIDC Issuer URL
SSO_ISSUER_URL=https://authentik.company/application/o/updockly/
# Client Credentials
SSO_CLIENT_ID=your-client-id
SSO_CLIENT_SECRET=your-client-secret
# Redirect URL (must match backend address + /api/auth/sso/callback)
SSO_REDIRECT_URL=http://localhost:5174/api/auth/sso/callback

# --- Notification Settings ---
# Generic Webhook URL
NOTIFICATION_WEBHOOK_URL=

# Discord
NOTIFICATION_DISCORD_TOKEN=
NOTIFICATION_DISCORD_CHANNEL=

# Triggers
NOTIFICATION_ON_SUCCESS=false
NOTIFICATION_ON_FAILURE=false

# Recap
NOTIFICATION_RECAP_TIME=
NOTIFICATION_CRON=

# --- SMTP Settings ---
# Enable SMTP client
SMTP_ENABLED=false
# SMTP Host
SMTP_HOST=
# SMTP Port
SMTP_PORT=587
# SMTP User
SMTP_USER=
# SMTP Password
SMTP_PASSWORD=
# SMTP From Address
SMTP_FROM=
# Enable SMTP TLS
SMTP_TLS=false
